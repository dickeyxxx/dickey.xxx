angular.module("xxx").controller("AdminCtrl",["$scope","postsService","$window","authService",function(t,e,o,n){n.loggedIn||(o.location.href="/github/auth");var r=function(){e.fetch().success(function(e){t.posts=e})};r(),t.newPost={},t.create=function(o){e.create(o).success(function(){r(),t.newPost={}})}}]),angular.module("xxx").controller("AdminPostCtrl",["$scope","$routeParams","postsService",function(t,e,o){var n=function(e){t.post=e};o.find(e.id).success(n),t.unpublish=function(t){o.unpublish(t._id).success(n)},t.publish=function(t){o.publish(t._id).success(n)}}]),angular.module("xxx").factory("authService",["$location","$window",function(t,e){return t.search().jwt&&(e.localStorage.jwt=t.search().jwt),{loggedIn:!!e.localStorage.jwt,jwt:e.localStorage.jwt}}]),angular.module("xxx").factory("postsService",["$http","authService",function(t,e){return{fetch:function(){return t.get("/api/posts")},find:function(e){return t.get("/api/posts/"+e)},create:function(o){return t.post("/api/posts",o,{headers:{Authorization:"Bearer "+e.jwt}})},unpublish:function(o){return t.post("/api/posts/"+o+"/unpublish",{},{headers:{Authorization:"Bearer "+e.jwt}})},publish:function(o){return t.post("/api/posts/"+o+"/publish",{},{headers:{Authorization:"Bearer "+e.jwt}})}}}]);